# Technology Stack

> Generated by /codebase-mapper on 2026-01-28

## Runtime

| Technology | Version | Purpose |
|---|---|---|
| Python | >=3.11 (local: 3.14.2) | Primary language |
| uv | 0.9.26 | Package manager (pip/poetry 대체) |
| Node.js | >=18 (local: v20.19.6) | code-graph-rag MCP 서버 실행 (npx) |
| direnv | latest | `.env` 자동 로드 (`.envrc` via `dotenv`) |

## Production Dependencies

| Package | Version | Purpose |
|---|---|---|
| mcp | >=1.0.0 | Model Context Protocol SDK |

## Development Dependencies

| Package | Version | Purpose |
|---|---|---|
| pytest | >=8.0 | 테스트 프레임워크 |
| ruff | >=0.8 | 린터 + 포매터 (9종 규칙) |
| mypy | >=1.13 | 정적 타입 체커 |

## External Tools (Non-Python)

| Tool | Purpose | Install |
|---|---|---|
| code-graph-rag | Tree-sitter + SQLite AST 분석 MCP 서버 | `npx -y @er77/code-graph-rag-mcp` (on-demand) |
| memory-graph | 에이전트 영구 기억 MCP 서버 | `make install-memorygraph` / `pipx install memorygraphMCP` |
| gh CLI | GitHub PR/Issue 관리 | `brew install gh` (optional) |

## Infrastructure

Docker/Memgraph 의존성 없음. code-graph-rag는 SQLite 기반으로 로컬에서 실행됩니다.

## MCP Servers

| Server | Transport | Tools | Purpose |
|---|---|---|---|
| graph-code | stdio (`npx @er77/code-graph-rag-mcp`) | 19개 도구 (`query`, `semantic_search`, `analyze_code_impact`, `analyze_hotspots`, `detect_code_clones`, `find_similar_code`, `list_file_entities`, `list_entity_relationships`, `suggest_refactoring`, `cross_language_search`, `find_related_concepts`, `index`, `clean_index`, `get_graph`, `get_graph_stats`, `get_graph_health`, `reset_graph`, `get_metrics`, `get_version`) | AST 기반 코드 분석 (Tree-sitter + SQLite) |
| memorygraph | stdio | 12개 도구 (`store_memory`, `recall_memories`, `search_memories`, `get_memory`, `update_memory`, `delete_memory`, `create_relationship`, `get_related_memories`, `get_memory_statistics`, `get_recent_activity`, `search_relationships_by_context`, `contextual_search`) | 에이전트 영구 기억 |
| Context7 | HTTP | 2개 도구 (`resolve-library-id`, `query-docs`) | 라이브러리 문서 조회 |

**Feature:** `enable_tool_search: true` (도구 탐색 활성화)

## IDE

| Extension | ID | Purpose |
|---|---|---|
| Ruff | charliermarsh.ruff | 린터 + 포매터 (네이티브 서버) |
| Python | ms-python.python | 인터프리터, 디버깅 |
| Mypy Type Checker | ms-python.mypy-type-checker | 타입 체크 (dmypy daemon) |
| Ruff Ignore Explainer | jannchie.ruff-ignore-explainer | 규칙 설명 인라인 표시 |

## Code Quality Configuration

| Tool | Config Location | Key Settings |
|---|---|---|
| Ruff | `pyproject.toml` | E,F,I,N,W,B,C90,PL,TC / line-length=100 / McCabe<=10 / max-args=6 / max-returns=6 / max-statements=50 |
| Mypy | `pyproject.toml` | python_version=3.11, warn_return_any=true, warn_unused_configs=true |
| Pytest | `pyproject.toml` | testpaths=["tests"] |
| VS Code | `.vscode/settings.json` | Ruff native server, format-on-save, 100-char ruler, mypy daemon |

**Naming Exceptions:** `*Factory`, `Create*` (N 규칙 면제)
**Ignored Rules:** E501 (line-length), PLR2004 (magic-value-comparison)
**Excluded Dirs:** awesome-claude-code, claude-code-tips, everything-claude-code, ralph

## Claude Code Hooks

| Hook | Trigger | Script | Purpose |
|---|---|---|---|
| bash-guard | PreToolUse:Bash | `.claude/hooks/bash-guard.py` | 파괴적 git + pip/poetry 차단 |
| file-protect | PreToolUse:Edit\|Write | `.claude/hooks/file-protect.py` | .env/시크릿/인증서 수정 차단 |
| auto-format-py | PostToolUse:Edit\|Write | `.claude/hooks/auto-format-py.sh` | Python 자동 포맷 (ruff) |
| session-start | SessionStart | `.claude/hooks/session-start.sh` | GSD 상태 + git status 주입 |
| pre-compact-save | PreCompact | `.claude/hooks/pre-compact-save.sh` | STATE/JOURNAL 백업 |

## Configuration

| Variable | Purpose | Required | Default |
|---|---|---|---|
| PROJECT_ID | 프로젝트 식별자 | Yes | `my_project` |
| MCP_TIMEOUT | code-graph-rag MCP 서버 타임아웃 (ms) | No | `80000` |
| CONTEXT7_API_KEY | Context7 MCP 서버 인증 | No | -- |
| MEMORY_BACKEND | memory-graph 스토리지 백엔드 | No | `sqlite` |
| MEMORY_TOOL_PROFILE | memory-graph 도구 프로필 | No | `extended` |
| DISABLE_AUTOUPDATER | Claude CLI 자동 업데이트 비활성화 | No | `0` |
| SSL_CERT_FILE | TLS 인증서 (기업 프록시 환경) | No | -- |

## Build & Run Commands

```bash
# Full Setup (one command)
make setup                    # install-deps → init-env → index

# Prerequisites Check
make check-deps               # node, npm, uv, pipx 확인

# Installation
make install-memorygraph      # pipx install memorygraphMCP
make install-deps             # 모든 외부 의존성 설치
make init-env                 # .env.example → .env 생성

# Status
make status                   # MCP 도구 + 환경 상태

# Code Indexing
make index                    # code-graph-rag 인덱싱 (npx)

# Code Quality
make lint / make lint-fix     # Ruff 린트/자동수정
make test                     # Pytest 실행
make typecheck                # Mypy 타입체크
make validate                 # SPEC 구조 검증

# System Prompt Patching
make patch-prompt             # Claude CLI 시스템 프롬프트 패치 (~50% 토큰 절감)
make patch-restore            # 원본 복원
make patch-clean              # 패치 워크스페이스 삭제

# Cleanup
make clean                    # 인덱스 데이터 + 패치 워크스페이스 삭제
```

## File Inventory

| Category | Count | Location |
|---|---|---|
| GSD Workflows | 29 | `.agent/workflows/` |
| Claude Skills | 14 SKILL.md + 16 scripts | `.claude/skills/` |
| Claude Agents | 13 | `.claude/agents/` |
| Claude Hooks | 5 (2 Python, 3 Shell) | `.claude/hooks/` |
| GSD Templates | 22 | `.gsd/templates/` |
| GSD Examples | 3 | `.gsd/examples/` |
| GSD Documents | 11 | `.gsd/` |
| GitHub (CI + Issues + Agent) | 5 | `.github/` |
| Test Files | 3 | `tests/` |
| Scripts | 1 | `scripts/` |
| Config Files | 19 | Root (pyproject.toml, .mcp.json, Makefile, etc.) |
| VS Code | 2 | `.vscode/` |
| Gemini | 1 | `.gemini/` |
| **Total (tracked)** | **144** | Boilerplate only (excludes .gitignore'd repos) |
