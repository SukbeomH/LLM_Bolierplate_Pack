# mise configuration for {{ project_name }}
# https://mise.jdx.dev/

[env]
_.file = ".env"

{% if stack == "python" %}
[tools]
python = "3.12"
uv = "latest"

[tasks.install]
description = "의존성 설치"
run = "uv sync"

[tasks.verify]
description = "코드 검증 (lint, format, test)"
run = """
uv run ruff check .
uv run ruff format --check .
uv run pytest 2>/dev/null || echo 'No tests found'
"""

[tasks.format]
description = "코드 포매팅"
run = "uv run ruff format ."

[tasks.test]
description = "테스트 실행"
run = "uv run pytest"
{% elif stack == "node" %}
[tools]
node = "20"
{% if package_manager == "pnpm" %}
pnpm = "latest"
{% endif %}

[tasks.install]
description = "의존성 설치"
run = "{{ package_manager }} install"

[tasks.verify]
description = "코드 검증"
run = """
{{ package_manager }} run lint 2>/dev/null || echo 'No lint script'
{{ package_manager }} run typecheck 2>/dev/null || echo 'No typecheck script'
{{ package_manager }} test 2>/dev/null || echo 'No test script'
"""

[tasks.format]
description = "코드 포매팅"
run = "{{ package_manager }} run format 2>/dev/null || echo 'No format script'"

[tasks.test]
description = "테스트 실행"
run = "{{ package_manager }} test"
{% else %}
[tasks.verify]
description = "프로젝트 검증"
run = "echo 'Stack: {{ stack }} - 검증 스크립트를 설정하세요'"
{% endif %}

[tasks.ai-verify]
description = "AI 도구로 전체 검증"
run = "uv run python -m langchain_tools.cli verify"
